
CREATE TABLE BOOKS(
BOOK_ID INT PRIMARY KEY,
BOOK_NAME VARCHAR(20) NOT NULL,
AUTHOR_NAME VARCHAR(20) NOT NULL
)

SELECT * FROM BOOKS

ALTER TABLE BOOKS
ADD BOOK_COUNT INT CHECK(BOOK_COUNT>0) NOT NULL

SELECT * FROM BOOKS

INSERT INTO BOOKS VALUES(101, 'Harry Potter', 'JK Rowling', 3)
INSERT INTO BOOKS VALUES(102, '1984', 'George Orwell', 5)

SELECT * FROM BOOKS

CREATE TABLE LIBRARY_VISITORS(
USER_ID INT PRIMARY KEY,
NAME VARCHAR(20) NOT NULL,
AGE INT CHECK(AGE>=17) NOT NULL,
EMAIL VARCHAR(20) NOT NULL UNIQUE
)

SELECT * FROM LIBRARY_VISITORS

INSERT INTO LIBRARY_VISITORS(USER_ID, NAME, AGE, EMAIL)
VALUES(101, 'Vansh Sharma', 18, 'vansh12@gmail.com')

--INSERT INTO LIBRARY_VISITORS(USER_ID, NAME, AGE, EMAIL)
--VALUES(501, 'Ansh Sharma', 18, 'vansh12@gmail.com') will not work since email should be unique

DROP TABLE BOOK_ISSUE
CREATE TABLE BOOK_ISSUE(
BOOK_ISSUE_ID INT PRIMARY KEY,
USER_ID INT NOT NULL,
BOOK_ID INT NOT NULL,
FOREIGN KEY(USER_ID) REFERENCES LIBRARY_VISITORS(USER_ID),  --THIS WORKS IN ORACLE
FOREIGN KEY(BOOK_ID) REFERENCES BOOKS(BOOK_ID)
)

INSERT INTO BOOK_ISSUE VALUES(10001, 501, 101)

ALTER TABLE BOOK_ISSUE
ADD ISSUE_DATE DATE

SELECT * FROM BOOK_ISSUE

INSERT INTO BOOK_ISSUE VALUES(1001, 501, 101, '2026-01-09')

UPDATE BOOK_ISSUE
SET ISSUE_DATE='2026-01-08'
WHERE BOOK_ISSUE_ID=1001

--delete or truncate
DELETE FROM BOOKS WHERE BOOK_ID=102

SELECT * FROM BOOKS

CREATE ROLE LIBRARIAN
WITH LOGIN PASSWORD 'mehak1234'

SELECT CURRENT_USER

GRANT SELECT, INSERT, DELETE, UPDATE ON BOOKS TO LIBRARIAN2
GRANT SELECT, INSERT, DELETE, UPDATE ON BOOK_ISSUE TO LIBRARIAN2
GRANT SELECT, INSERT, DELETE, UPDATE ON LIBRARY_VISITORS TO LIBRARIAN2

REVOKE SELECT, INSERT, DELETE, UPDATE ON BOOKS, BOOK_ISSUE, LIBRARY_VISITORS FROM LIBRARIAN2